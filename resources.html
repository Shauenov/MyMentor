<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notes & Resources</title>
  <style>
    body {
  background-color: #1e1f21;
  color: #fff;
  font-family: 'Poppins', sans-serif;
  padding: 20px;
  margin: 0;
}

header {
  text-align: center;
  margin-bottom: 20px;
}

#username {
  color: #00cc88;
}

.container {
  background-color: #2a2b2e;
  border-radius: 10px;
  padding: 20px;
  max-width: 1000px;
  margin: auto;
}

.action-btn {
  background-color: #4da6ff;
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 6px;
  display: inline-block;
  margin: 10px 0;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.3s;
  border: none; 
}

.action-btn:hover {
  background-color: #3587cc;
}

.note-list {
  list-style-type: none;
  padding: 0;
}
img{
  border-radius: 4px;
  margin-left:5px
}

.note-list li {
  background: #444;
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.note-list li .editable {
  flex-grow: 1;
  color: #ddd;
}

.note-list li .action-btn-small {
  background: #4da6ff;
  color: white;
  padding: 5px 10px;
  font-size: 12px;
  border-radius: 6px;
  cursor: pointer;
  border: none; 
}

.note-list li .action-btn-small:hover {
  background:#3587cc
}

.note-list li .icon {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

#noteInput {
  max-width: 980px;
  padding: 10px;
  margin-top: 10px;
  background: #333;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
}

#noteInput::placeholder {
  color: #aaa;
}
.green-btn{
  background-color: #00cc88;
}
.row{
  display: grid;

}

 .footer {
  background-color: #2a2b2e;
  color: #f0f0f0;
  padding: 40px 20px;
  font-family: 'Segoe UI', sans-serif;
}

.footer-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 30px;
  max-width: 1200px;
  margin: auto;
}

.footer-brand h2 {
  margin: 0 0 10px;
  color: #ffffff;
}

.footer-brand p {
  margin: 0;
  font-size: 14px;
  color: #aaaaaa;
}

.footer-links {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.footer-links a {
  text-decoration: none;
  color: #dddddd;
  font-size: 14px;
  transition: color 0.2s ease-in-out;
}

.footer-links a:hover {
  color: #1e90ff;
}

.footer-contact p {
  font-size: 13px;
  margin: 4px 0;
  color: #999999;
}

  </style>
</head>
<body>

  <header>
    <h1>Notes for <span id="username"></span></h1>
  </header>

  <div class="container">
    <a href="profile.html" class="action-btn">Back to profile</a>
    
    <div class="row">

      <textarea id="noteInput" placeholder="Write a note..." rows="4"></textarea><br>
      <button class="action-btn green-btn" onclick="addNote()">Add Note</button>
    </div>

    <ul id="noteList" class="note-list"></ul>

    <footer class="footer">
  <div class="footer-container">
    <div class="footer-brand">
      <h2>MyMentor</h2>
      <p>Platform for learning IT with mentors</p>
    </div>

    <div class="footer-links">
      <a href="#">About Us</a>
      <a href="#">Contacts</a>
      <a href="#">FAQ</a>
      <a href="#">Privacy Policy.</a>
    </div>

    <div class="footer-contact">
      <p>Email: shauennurasyl2007@gmail.com</p>
      <p>Â© 2025 MyMentor</p>
    </div>
  </div>
</footer>
  </div>

  <script>
    let currentUser = JSON.parse(localStorage.getItem("current_user"));
    if (!currentUser) {
      window.location.href = "login.html";
    }

    document.getElementById("username").innerText = currentUser.name;
    const noteList = document.getElementById("noteList");

    function renderNotes() {
      noteList.innerHTML = "";

      currentUser.resources.forEach((note, index) => {
        const li = document.createElement("li");

        const span = document.createElement("span");
        span.className = "editable";
        span.innerText = note;
        span.contentEditable = false;

        // Edit button
        const editBtn = document.createElement("span");
        editBtn.className = "action-btn-small";
        editBtn.innerText = "Edit";
        editBtn.onclick = () => {
          span.contentEditable = true;
          span.focus();
        };

        // Save on blur
        span.onblur = () => {
          const newText = span.innerText.trim();
          if (newText && newText !== currentUser.resources[index]) {
            currentUser.resources[index] = newText;
            updateUserData();
          }
          span.contentEditable = false;
        };

        // Delete icon
        const delImg = document.createElement("img");
        delImg.src = "img/bin_icon.webp"; 
        delImg.alt = "Delete";
        delImg.className = "icon";
        delImg.onclick = () => {
          currentUser.resources.splice(index, 1);
          updateUserData();
          renderNotes();
        };

        li.appendChild(span);
        li.appendChild(editBtn);
        li.appendChild(delImg);
        noteList.appendChild(li);
      });
    }

    function addNote() {
      const text = document.getElementById("noteInput").value.trim();
      if (!text) return;

      currentUser.resources.push(text);
      document.getElementById("noteInput").value = "";
      updateUserData();
      renderNotes();
    }

    function updateUserData() {
      const users = JSON.parse(localStorage.getItem("mymentor_users")) || [];
      const idx = users.findIndex(u => u.name === currentUser.name);
      if (idx !== -1) {
        users[idx] = currentUser;
        localStorage.setItem("mymentor_users", JSON.stringify(users));
        localStorage.setItem("current_user", JSON.stringify(currentUser));
      }
    }


    renderNotes();
  </script>

</body>
</html>
